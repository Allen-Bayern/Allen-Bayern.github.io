{"version":3,"file":"js/home.ba60760f.js","mappings":"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","sources":["webpack://self-site/./src/articles/index.ts","webpack://self-site/./src/views/HomeView.vue","webpack://self-site/./src/views/HomeView.vue?7579","webpack://self-site/./src/articles/ lazy \\.md$/"],"sourcesContent":["/** 导出文章类型 */\ninterface ArticleLazyReturn {\n    default: string;\n}\n\n/** @description 基本文章信息 */\nexport type BaseArticleMeta = Partial<{\n    /** @description 文章标题 */\n    artTitle: string;\n    /** @description 文章摘要 */\n    articleAbstract: string;\n    /** @description 创建时间 */\n    createTime: Date;\n    /** @description 最后修改时间 */\n    modifyTime: Date;\n}>;\n\n/**\n * @description 去掉文件名的前缀'./'与后缀'.md'\n * @param filePath 输入的文件path\n * @returns 纯净的文件名\n */\nconst pureName = (filePath: string): string =>\n    //       移除前缀 './'       &   移除后缀 '.md'\n    filePath.replace(/^\\.\\//, '').replace(/\\.md$/, '');\n\n/** @description 引入所有文章 */\nexport const importAllArticles = () => {\n    const articlesCxt = require.context('.', true, /\\.md$/i, 'lazy');\n    return articlesCxt.keys().reduce(\n        (prev, k) => ({\n            ...prev,\n            [pureName(k)]: articlesCxt(k),\n        }),\n        {} as Record<string, unknown>\n    ) as Record<string, Promise<ArticleLazyReturn>>;\n};\n","import \"core-js/modules/es.array.push.js\";\nimport { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2aaceb28\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  class: \"home-art-time home-art-card\"\n};\nconst _hoisted_4 = {\n  class: \"home-art-abs home-art-card\"\n};\nimport { shallowRef, onBeforeMount } from 'vue';\nimport { useRouter } from 'vue-router';\nimport strFormat from 'string-format';\nimport yaml from 'js-yaml';\nimport moment from 'moment';\nimport { importAllArticles } from '@/articles';\nimport { YMD } from '@/utils';\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HomeView',\n  setup(__props) {\n    const router = useRouter();\n    /** @description 文章列表 */\n    const articleList = shallowRef([]);\n    /** @description 处理文章函数 */\n    async function processAllArticles() {\n      // regular expressions\n      const metaPattern = /^---\\n([\\s\\S]*?)\\n---/;\n      const h1Pattern = /^# (.+)$/m;\n      const metaStrTemplate = '---\\n{}\\n---\\n\\n';\n      const allArts = importAllArticles();\n      const res = [];\n      Object.keys(allArts).forEach(async (k, i) => {\n        const val = await allArts[k];\n        const {\n          default: markdownText\n        } = val;\n        const metaMatch = markdownText.match(metaPattern);\n        const metaInfo = metaMatch ? metaMatch[1] : '';\n        const metaDict = yaml.load(metaInfo);\n        const {\n          createTime,\n          modifyTime,\n          artTitle,\n          articleAbstract: artAbstract\n        } = metaDict;\n        // 文章最新修改时间\n        let latestTimeNum = +new Date();\n        if (createTime && modifyTime) {\n          latestTimeNum = Math.max(+createTime, +modifyTime);\n        }\n        // cope with content\n        const articleCnt = markdownText.replace(strFormat(metaStrTemplate, metaInfo), '');\n        // 截取h1部分, 并分离h1与正文\n        const h1Match = articleCnt.match(h1Pattern);\n        const h1Title = h1Match ? h1Match[1] : '';\n        const restContent = articleCnt.replace(`# ${h1Title}`, '');\n        // 文章title\n        const articleTitle = artTitle ?? h1Title;\n        // 文章摘要, 如无则取前100字\n        const articleAbstract = (artAbstract ?? restContent ?? '').trim().substring(0, 100);\n        res.push({\n          artKey: k,\n          latestTime: moment(latestTimeNum).format(YMD),\n          articleTitle,\n          articleAbstract\n        });\n        if (i === Object.keys(allArts).length - 1) {\n          // 添加完毕后设置value\n          articleList.value = res.sort((prevValue, nextValue) => {\n            const {\n              latestTime: prevLatest\n            } = prevValue;\n            const {\n              latestTime: nextLatest\n            } = nextValue;\n            return moment(prevLatest).valueOf() - moment(nextLatest).valueOf();\n          });\n        }\n      });\n    }\n    /** @description 路由跳转函数 */\n    function toArticle(article) {\n      router.push({\n        name: 'article',\n        query: {\n          article\n        }\n      });\n    }\n    onBeforeMount(() => {\n      processAllArticles();\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(articleList.value, (item, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: item.articleTitle,\n          class: \"home-art\",\n          onClick: $event => toArticle(item.artKey)\n        }, [_createElementVNode(\"h1\", {\n          class: _normalizeClass(['home-art-title', 'home-art-card', index >= 2 ? 'more-than-two' : ''])\n        }, _toDisplayString(item.articleTitle), 3), _createElementVNode(\"p\", _hoisted_3, _toDisplayString(item.latestTime), 1), _createElementVNode(\"p\", _hoisted_4, _toDisplayString(item.articleAbstract), 1)], 8, _hoisted_2);\n      }), 128))]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./HomeView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HomeView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=2aaceb28&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2aaceb28\"]])\n\nexport default __exports__","var map = {\n\t\"./HelloWorld.md\": [\n\t\t4614,\n\t\t614\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 6367;\nmodule.exports = webpackAsyncContext;"],"names":["pureName","filePath","replace","importAllArticles","articlesCxt","require","keys","reduce","prev","k","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","__name","setup","__props","router","articleList","async","processAllArticles","metaPattern","h1Pattern","metaStrTemplate","allArts","res","Object","forEach","i","val","default","markdownText","metaMatch","match","metaInfo","metaDict","createTime","modifyTime","artTitle","articleAbstract","artAbstract","latestTimeNum","Date","Math","max","articleCnt","h1Match","h1Title","restContent","articleTitle","trim","substring","push","artKey","latestTime","format","length","value","sort","prevValue","nextValue","prevLatest","nextLatest","valueOf","toArticle","article","name","query","_ctx","_cache","item","index","key","onClick","$event","__exports__","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","module","exports"],"sourceRoot":""}